gitRepository:
  spec:
    url: "https://github.com/fluencelabs/spectrum.git"
    interval: "1m"
    ref:
      branch: ${network}

kustomizationlist:
  - spec:
      interval: "1m0s"
      path: "./flux/clusters/${cluster}"
      validation: "client"
      prune: true
      %{ if variables != null }
      postBuild:
        substitute:
          %{ for key, value in variables }
          ${key}: ${value}
          %{ endfor }
      %{ endif }

  - spec:
      interval: 1m0s
      path: "./flux/components/lightmare/app"
      prune: true

  %{ for component in components }
  - spec:
      interval: 1m0s
      path: "./flux/components/${component}/app"
      prune: true
  %{ endfor }
